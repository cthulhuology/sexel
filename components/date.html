<script>
    // Define the 'sexel-date' component using the Sexel framework
    Sexel.tag('sexel-date', ['datestamp'], {
        ondraw: (self) => {
            const dateInput = self.querySelector('#date-input');
            const dateDisplay = self.querySelector('#date-display');
            const initialDate = self.datestamp() ? new Date(self.datestamp()) : new Date();

            // Set the initial value of the date input
            const formatForInput = (date) => {
                return date.toISOString().split('T')[0];  // Format to YYYY-MM-DD
            };
            dateInput.value = formatForInput(initialDate);

            // Display the formatted selected date
            const updateDateDisplay = (date) => {
                dateDisplay.textContent = date.toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
            };

            // Initialize display
            updateDateDisplay(initialDate);

            // Handle date selection changes
            dateInput.onchange = (e) => {
                const selectedDate = new Date(e.target.value);
                updateDateDisplay(selectedDate);
            };
        }
    });
</script>

<style>
    .sexel-date {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        margin: 10px 0;
        font-family: var(--base-font-family);
	background-color: var(--base-background);
        color: var(--base-text);
    }

    .sexel-date input {
        padding: 8px;
        font-size: var(--base-font-larger);
        margin-bottom: 10px;
        border: var(--base-border);
        border-radius: var(--base-border-radius);
        box-shadow: var(--base-shadow);
        color: var(--base-text);
    }

    .sexel-date-display {
        font-size: var(--base-font-larger);
        font-weight: bold; 
        color: var(--base-text);
    }
</style>

<template id="sexel-date">
    <div class="sexel-date">
        <!-- Date input picker -->
        <input type="date" id="date-input" class="sexel-date-input">
        <!-- Formatted date display -->
        <div class="sexel-date-display" id="date-display"></div>
    </div>
</template>

