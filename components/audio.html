<script>
    // Define the 'sexel-audio' component using the Sexel framework
    Sexel.tag('sexel-audio', ['src', 'controls'], {
        ondraw: (self) => {
            const audioElement = self.querySelector('#audio-element');
            const playPauseButton = self.querySelector('#play-pause-button');
            const stopButton = self.querySelector('#stop-button');

            // Set the audio source from the src attribute
            audioElement.src = self.src() || '';

            // Show native audio controls if the "controls" attribute is set to "true"
            audioElement.controls = self.controls() === 'true';

            // Play/pause functionality
            const playPauseAudio = () => {
                if (audioElement.paused) {
                    audioElement.play();
                    playPauseButton.textContent = 'Pause';
                } else {
                    audioElement.pause();
                    playPauseButton.textContent = 'Play';
                }
            };

            // Stop functionality: Pause and reset audio to the beginning
            const stopAudio = () => {
                audioElement.pause();
                audioElement.currentTime = 0;
                playPauseButton.textContent = 'Play';
            };

            // Attach events to buttons
            playPauseButton.onclick = playPauseAudio;
            stopButton.onclick = stopAudio;

            // API methods exposed on the component
            self.playAudio = () => {
                audioElement.play();
                playPauseButton.textContent = 'Pause';
            };

            self.pauseAudio = () => {
                audioElement.pause();
                playPauseButton.textContent = 'Play';
            };

            self.stopAudio = () => {
                stopAudio();
            };
        }
    });
</script>

<style>
    .sexel-audio {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px;
        border: var(--base-border);
        border-radius: 8px;
        background-color: var(--base-background);
        box-shadow: var(--basae-shadow);
    }

    .audio-button {
        background-color: var(--button-background-color);
        color: var(--button-color);
        border: var(--button-border);
        border-radius: var(--button-border-radius);
        cursor: pointer;
        font-size: var(--button-font-size);
        padding: 8px 12px;
    }

    .audio-button:hover {
        background-color: var(--button-hover-color);
    }
</style>

<template id="sexel-audio">
    <div class="sexel-audio">
        <!-- Audio Element -->
        <audio id="audio-element"></audio>

        <!-- Custom Play/Pause and Stop buttons -->
        <button id="play-pause-button" class="audio-button">Play</button>
        <button id="stop-button" class="audio-button">Stop</button>
    </div>
</template>

